KoM_ai_thaumaturgy_recuperare_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 10 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_effect = { MODIFIER = KoM_recuperare_persona } }
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 12
	ai_will_do = { 
		base = 25 
		modifier = {
			scope:actor = { KoM_should_ai_heal_trigger = yes }
			add = 50
		}
	}
}
KoM_ai_thaumaturgy_claritudo_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 10 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_effect = { MODIFIER = KoM_claritudo_persona } }
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 12
	ai_will_do = { base = 25 }
}
KoM_ai_thaumaturgy_sarcio_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 30 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_save_confirmation_effect = yes }
		scope:recipient = {
			if = { limit = { has_trait = wounded_1 scope:scaling >= 1 } remove_trait = wounded_1 }
			if = { limit = { has_trait = scarred scope:scaling >= 1 } remove_trait = scarred }
			if = { limit = { has_trait = ill scope:scaling >= 1 } recover_from_disease_effect = { DISEASE = ill } }

			if = { limit = { has_trait = wounded_2 scope:scaling >= 2 } remove_trait = wounded_2 add_trait = wounded_1 }
			if = { limit = { has_trait = impotent scope:scaling >= 3 } remove_trait = impotent }
			if = { limit = { has_trait = disfigured scope:scaling >= 2 } remove_trait = disfigured }
			if = { limit = { has_trait = pneumonic scope:scaling >= 2 } recover_from_disease_effect = { DISEASE = pneumonic } }
			if = { limit = { has_trait = early_great_pox scope:scaling >= 2 } recover_from_disease_effect = { DISEASE = early_great_pox } }

			if = { limit = { has_trait = wounded_3 scope:scaling >= 3 } remove_trait = wounded_3 add_trait = wounded_2 }
			if = { limit = { has_trait = infirm scope:scaling >= 3 } remove_trait = infirm }
			if = { limit = { has_trait = consumption scope:scaling >= 3 } recover_from_disease_effect = { DISEASE = consumption } }
			if = { limit = { has_trait = great_pox scope:scaling >= 3 } recover_from_disease_effect = { DISEASE = great_pox } }
			if = { limit = { has_trait = gout_ridden scope:scaling >= 3 } recover_from_disease_effect = { DISEASE = gout_ridden } }
			if = { limit = { has_trait = dysentery scope:scaling >= 3 } recover_from_disease_effect = { DISEASE = dysentery } }
			if = { limit = { has_trait = leper scope:scaling >= 3 } recover_from_disease_effect = { DISEASE = leper } }
			if = { limit = { has_trait = lovers_pox scope:scaling >= 3 } recover_from_disease_effect = { DISEASE = lovers_pox } }
			if = { limit = { has_trait = ergotism scope:scaling >= 3 } recover_from_disease_effect = { DISEASE = ergotism } }

			if = { limit = { has_trait = maimed scope:scaling >= 4 } remove_trait = maimed }
			if = { limit = { has_trait = one_legged scope:scaling >= 4 } remove_trait = one_legged }
			if = { limit = { has_trait = eunuch_1 scope:scaling >= 4 } remove_trait = eunuch_1 }
			if = { limit = { has_trait = one_eyed scope:scaling >= 4 } remove_trait = one_eyed }
			if = { limit = { has_trait = blind scope:scaling >= 4 } remove_trait = blind add_trait = one_eyed }
			if = { limit = { has_trait = incapable scope:scaling >= 4 } remove_trait = incapable }
			if = { limit = { has_trait = cancer scope:scaling >= 4 } recover_from_disease_effect = { DISEASE = cancer } }
			if = { limit = { has_trait = smallpox scope:scaling >= 4 } recover_from_disease_effect = { DISEASE = smallpox } }
			if = { limit = { has_trait = typhus scope:scaling >= 4 } recover_from_disease_effect = { DISEASE = typhus } }
			if = { limit = { has_trait = bubonic_plague scope:scaling >= 4 } recover_from_disease_effect = { DISEASE = bubonic_plague } }
			if = { limit = { has_trait = measles scope:scaling >= 4 } recover_from_disease_effect = { DISEASE = measles } }
		}
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 24
	ai_will_do = { 
		base = 25
		modifier = {
			scope:actor = { KoM_should_ai_heal_trigger = yes }
			add = 50
		}
	}
}
KoM_ai_thaumaturgy_damnum_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 30 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_save_confirmation_effect = yes }
		scope:recipient = {
			if = { limit = { scope:scaling >= 1 } increase_wounds_no_death_effect = { REASON = fight } }
			if = { limit = { scope:scaling >= 2 } increase_wounds_no_death_effect = { REASON = fight } }
			if = { limit = { scope:scaling >= 3 } increase_wounds_no_death_effect = { REASON = fight } }
			if = { limit = { scope:scaling >= 4 } maimed_in_battle_effect = yes }
		}
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = scripted_relations }
	ai_frequency = 24
	ai_will_do = { 
		base = 25 
		modifier = {
			scope:actor = { 
				NOR = {
					has_relation_potential_rival = scope:recipient
					has_relation_rival = scope:recipient
					has_relation_nemesis = scope:recipient
				}
			}
			add = -25
		}
	}
}
KoM_ai_thaumaturgy_celeritas_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 30 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_effect = { MODIFIER = KoM_celeritas_persona } }
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 24
	ai_will_do = { base = 25 }
}
KoM_ai_thaumaturgy_fortitudo_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 50 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_effect = { MODIFIER = KoM_fortitudo_persona } }
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 36
	ai_will_do = { base = 25 }
}
KoM_ai_thaumaturgy_stabilitas_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 50 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_save_confirmation_effect = yes }
		scope:recipient = {
			save_scope_value_as = {
				name = stress_gain
				value = { value = scope:scaling multiply = -10 }
			}
			add_stress = scope:stress_gain
		}
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 36
	ai_will_do = { 
		base = 25 
		modifier = {
			scope:actor = { stress >= 50 }
			add = 50
		}
	}
}
KoM_ai_thaumaturgy_opinio_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 75 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_effect = { MODIFIER = KoM_opinio_persona } }
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 48
	ai_will_do = { base = 25 }
}
KoM_ai_thaumaturgy_anima_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 75 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_effect = { MODIFIER = KoM_anima_persona } }
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 48
	ai_will_do = { base = 25 }
}
KoM_ai_thaumaturgy_scientia_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 100 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_effect = { MODIFIER = KoM_scientia_persona } }
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 75
	ai_will_do = { base = 25 }
}
KoM_ai_thaumaturgy_melius_interaction = {
	category = interaction_category_religion
	icon = KoM_thaumaturgy_interaction
	desc = KoM_thaumaturgy_interaction_desc

	is_shown = { scope:actor = { is_ai = yes KoM_is_practitioner_of_magic_school_trigger = { SCHOOL = flag:thaumaturgy } } }
	is_valid = { scope:actor = { KoM_has_magic_school_xp_trigger = { SCHOOL = flag:thaumaturgy VALUE = 100 AT_LEAST = yes } } }

	on_accept = {
		scope:actor = { KoM_ai_thaumaturgy_interaction_save_confirmation_effect = yes }
		scope:recipient = {
			if = { limit = { scope:scaling >= 1 }
				random_list = {
					1 = { trigger = { NOT = { has_trait = strong } } add_trait = strong }
					1 = { trigger = { NOT = { has_trait = shrewd } } add_trait = shrewd }
					1 = { trigger = { NOT = { has_trait = pure_blooded } } add_trait = pure_blooded }
					1 = { trigger = { NOT = { has_trait = fecund } } add_trait = fecund }
					1 = { trigger = { has_trait = clubfooted } remove_trait = clubfooted }
					1 = { trigger = { has_trait = hunchbacked } remove_trait = hunchbacked }
					1 = { trigger = { has_trait = lisping } remove_trait = lisping }
					1 = { trigger = { has_trait = stuttering } remove_trait = stuttering }
					1 = { trigger = { has_trait = inbred } remove_trait = inbred }
					1 = { trigger = { has_trait = weak } remove_trait = weak }
					1 = { trigger = { has_trait = dull } remove_trait = dull }
					1 = { trigger = { has_trait = impotent } remove_trait = impotent }
					1 = { trigger = { has_trait = spindly } remove_trait = spindly }
					1 = { trigger = { has_trait = scaly } remove_trait = scaly }
					1 = { trigger = { has_trait = wheezing } remove_trait = wheezing }
					1 = { trigger = { has_trait = bleeder } remove_trait = bleeder }
					1 = { trigger = { has_trait = infertile } remove_trait = infertile }
				}
			}
			if = { limit = { scope:scaling >= 2 }
				random_list = {
					1 = {
						trigger = { has_trait = beauty_bad }
						change_trait_rank = { trait = beauty_bad rank = -1 }
					}
					1 = {
						trigger = { NOT = { has_trait = beauty_bad has_trait = beauty_good_3 } }
						change_trait_rank = { trait = beauty_good rank = 1 }
					}
				}
			}
			if = { limit = { scope:scaling >= 3 }
				random_list = {
					1 = {
						trigger = { has_trait = physique_bad }
						change_trait_rank = { trait = physique_bad rank = -1 }
					}
					1 = {
						trigger = { NOT = { has_trait = physique_bad has_trait = physique_good_3 } }
						change_trait_rank = { trait = physique_good rank = 1 }
					}
				}
			}
			if = { limit = { scope:scaling >= 4 }
				random_list = {
					1 = {
						trigger = { has_trait = intellect_bad }
						change_trait_rank = { trait = intellect_bad rank = -1 }
					}
					1 = {
						trigger = { NOT = { has_trait = intellect_bad has_trait = intellect_good_3 } }
						change_trait_rank = { trait = intellect_good rank = 1 }
					}
				}
			}
		}
	}

	ai_potential = { is_physically_able = yes }
	ai_targets = { ai_recipients = self }
	ai_frequency = 75
	ai_will_do = { base = 25 }
}