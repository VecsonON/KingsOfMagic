KoM_goetia_xp_gui = {
	value = -1
	if = { limit = { has_trait = KoM_magus } value = "this.has_trait_xp(KoM_magus)" }
	if = { limit = { has_variable = KoM_goetia_xp } value = var:KoM_goetia_xp }
	max = 100
}
KoM_goetia_xp = { value = KoM_goetia_xp_gui min = 0 }
KoM_thaumaturgy_xp_gui = {
	value = -1
	if = { limit = { has_trait = KoM_thaumaturge } value = "this.has_trait_xp(KoM_thaumaturge)" }
	if = { limit = { has_variable = KoM_thaumaturgy_xp } value = var:KoM_thaumaturgy_xp }
	max = 100
}
KoM_thaumaturgy_xp = { value = KoM_thaumaturgy_xp_gui min = 0 }
KoM_theurgy_xp_gui = {
	value = -1
	if = { limit = { has_trait = KoM_theurgist } value = "this.has_trait_xp(KoM_theurgist)" }
	if = { limit = { has_variable = KoM_theurgy_xp } value = var:KoM_theurgy_xp }
	max = 100
}
KoM_theurgy_xp = { value = KoM_theurgy_xp_gui min = 0 }
KoM_alchemy_xp_gui = {
	value = -1
	if = { limit = { has_trait = KoM_alchemist } value = "this.has_trait_xp(KoM_alchemist)" }
	if = { limit = { has_variable = KoM_alchemy_xp } value = var:KoM_alchemy_xp }
	max = 100
}
KoM_alchemy_xp = { value = KoM_alchemy_xp_gui min = 0 }
KoM_taoism_xp_gui = {
	value = -1
	if = { limit = { has_trait = KoM_daoshi } value = "this.has_trait_xp(KoM_daoshi)" }
	if = { limit = { has_variable = KoM_taoism_xp } value = var:KoM_taoism_xp }
	max = 100
}
KoM_taoism_xp = { value = KoM_taoism_xp_gui min = 0 }
KoM_onmyodo_xp_gui = {
	value = -1
	if = { limit = { has_trait = KoM_onmyoji } value = "this.has_trait_xp(KoM_onmyoji)" }
	if = { limit = { has_variable = KoM_onmyodo_xp } value = var:KoM_onmyodo_xp }
	max = 100
}
KoM_onmyodo_xp = { value = KoM_onmyodo_xp_gui min = 0 }

KoM_grimoire_min = {
	value = 0
	if = { limit = { has_variable = min_mastery } value = var:min_mastery }
	floor = yes
}
KoM_grimoire_max = {
	value = 0
	if = { limit = { has_variable = max_mastery } value = var:max_mastery }
	floor = yes
}
KoM_grimoire_gain = {
	value = 0
	if = { limit = { has_variable = mastery_gain } value = var:mastery_gain }
	floor = yes
}

KoM_extra_rite_speed_mult = {
	value = 1
	if = {
		limit = { has_character_modifier = KoM_aurum_astralis_potion_modifier }
		add = 0.5
	}
	if = {
		limit = { any_character_artifact = { has_artifact_modifier = KoM_yin_yang_harmony_modifier } }
		every_character_artifact = {
			limit = { has_artifact_modifier = KoM_yin_yang_harmony_modifier }
			add = 0.2
		}
	}
}

KoM_rite_time_6_months = 16.68
KoM_rite_time_3_months = {
	value = KoM_rite_time_6_months
	multiply = 2
}
KoM_rite_time_1_months = {
	value = KoM_rite_time_3_months
	multiply = 3
}
KoM_rite_time_1_year = {
	value = KoM_rite_time_6_months
	divide = 2
}
KoM_rite_time_2_years = {
	value = KoM_rite_time_1_year
	divide = 2
}
KoM_rite_time_3_years = {
	value = KoM_rite_time_1_year
	divide = 3
}
KoM_rite_time_4_years = {
	value = KoM_rite_time_1_year
	divide = 4
}
KoM_rite_time_5_years = {
	value = KoM_rite_time_1_year
	divide = 5
}
KoM_rite_time_10_years = {
	value = KoM_rite_time_1_year
	divide = 10
}

KoM_yearly_ai_xp_gain = {
	value = learning
	divide = 10
}

KoM_theurgy_level = {
	value = 1
	if = {
		limit = { exists = piety_level }
		value = piety_level
	}
}

KoM_thaumaturgy_spell_difficulty = {
	value = 0
	add = scope:spell.var:spell_difficulty
	if = { limit = { KoM_has_hideout_building_trigger = { ID = hideout_building_thaumaturgic_laboratory } scope:building.var:building_level = 1 } multiply = 0.95 }
	if = { limit = { KoM_has_hideout_building_trigger = { ID = hideout_building_thaumaturgic_laboratory } scope:building.var:building_level = 2 } multiply = 0.90 }
	if = { limit = { KoM_has_hideout_building_trigger = { ID = hideout_building_thaumaturgic_laboratory } scope:building.var:building_level = 3 } multiply = 0.85 }
	if = { limit = { KoM_has_hideout_building_trigger = { ID = hideout_building_thaumaturgic_laboratory } scope:building.var:building_level = 4 } multiply = 0.8 }
	min = 1
}

KoM_alchemy_salt = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_salt }  		 value = var:KoM_alchemy_salt }
}
KoM_alchemy_charcoal = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_charcoal } 	 value = var:KoM_alchemy_charcoal }
}
KoM_alchemy_honey = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_honey } 		 value = var:KoM_alchemy_honey }
}
KoM_alchemy_lead = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_lead } 		 value = var:KoM_alchemy_lead }
}
KoM_alchemy_silver = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_silver } 		 value = var:KoM_alchemy_silver }
}
KoM_alchemy_crushed_crystals = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_crushed_crystals } value = var:KoM_alchemy_crushed_crystals }
}
KoM_alchemy_human_blood = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_human_blood }	 value = var:KoM_alchemy_human_blood }
}
KoM_alchemy_vulcanic_ash = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_vulcanic_ash } 	 value = var:KoM_alchemy_vulcanic_ash }
}
KoM_alchemy_fireflower = {
	value = 0 if = { limit = { has_variable = KoM_alchemy_fireflower } 	 value = var:KoM_alchemy_fireflower }
}

KoM_taoism_lianjing_huaqi_xp = {
	value = 0
	if = { limit = { has_trait = KoM_lianjing_huaqi } value = "this.has_trait_xp(KoM_lianjing_huaqi)" }
}
KoM_taoism_lianqi_huashen_xp = {
	value = 0
	if = { limit = { has_trait = KoM_lianqi_huashen } value = "this.has_trait_xp(KoM_lianqi_huashen)" }
}
KoM_taoism_lianshen_huanxu_xp = {
	value = 0
	if = { limit = { has_trait = KoM_lianshen_huanxu } value = "this.has_trait_xp(KoM_lianshen_huanxu)" }
}